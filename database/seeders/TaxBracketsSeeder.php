<?php

namespace Database\Seeders;

use App\Models\TaxBracket;
use App\Models\Kategoripph;
use Illuminate\Database\Seeder;
use Illuminate\Database\Console\Seeds\WithoutModelEvents;

class TaxBracketsSeeder extends Seeder
{
    /**
     * Run the database seeds.
     */
    public function run(): void
    {
        $data = [
            'A' => [
                [0, 0.0000],
                [5400000, 0.0025],
                [5650000, 0.0050],
                [5950000, 0.0075],
                [6300000, 0.0100],
                [6750000, 0.0125],
                [7500000, 0.0150],
                [8550000, 0.0175],
                [9650000, 0.0200],
                [10350000, 0.0225],
                [11050000, 0.0250],
                [10700000, 0.0300],
                [11650000, 0.0350],
                [12500000, 0.0400],
                [13750000, 0.0600],
                [15100000, 0.0700],
                [16550000, 0.0800],
                [18050000, 0.0900],
                [19650000, 0.1000],
                [21450000, 0.1100],
                [23400000, 0.1200],
                [25500000, 0.1300],
                [27800000, 0.1400],
                [30300000, 0.1500],
                [32450000, 0.1600],
                [35000000, 0.1700],
                [37800000, 0.1800],
                [40950000, 0.1900],
                [44400000, 0.2000],
                [48150000, 0.2100],
                [52200000, 0.2200],
                [56550000, 0.2300],
                [61200000, 0.2400],
                [66150000, 0.2500],
                [71400000, 0.2600],
                [76950000, 0.2700],
                [82800000, 0.2800],
                [88950000, 0.2900],
                [95400000, 0.3000],
                [102150000, 0.3100],
                [109950000, 0.3200],
                [118050000, 0.3300],
                [126450000, 0.3400],
                [140000000, 0.3400],
            ],
            'B' => [
                [0, 0.0000],
                [6200000, 0.0025],
                [6500000, 0.0050],
                [6850000, 0.0075],
                [7300000, 0.0100],
                [7850000, 0.0125],
                [8600000, 0.0150],
                [9750000, 0.0200],
                [11250000, 0.0250],
                [11600000, 0.0300],
                [12600000, 0.0400],
                [13500000, 0.0500],
                [14500000, 0.0600],
                [16400000, 0.0700],
                [18450000, 0.0800],
                [21850000, 0.0900],
                [26000000, 0.1000],
                [27700000, 0.1100],
                [29350000, 0.1200],
                [31450000, 0.1300],
                [33950000, 0.1400],
                [37100000, 0.1500],
                [41100000, 0.1600],
                [45100000, 0.1700],
                [49500000, 0.1800],
                [53500000, 0.1900],
                [58500000, 0.2000],
                [64000000, 0.2100],
                [70400000, 0.2200],
                [77450000, 0.2300],
                [85300000, 0.2400],
                [93000000, 0.2500],
                [103000000, 0.2600],
                [123000000, 0.2700],
                [163000000, 0.2800],
                [374000000, 0.2900],
                [493000000, 0.3000],
                [555000000, 0.3100],
                [670000000, 0.3200],
                [795000000, 0.3300],
                [1405000000, 0.3400],
            ],
            'C' => [
                [0, 0.0000],
                [6600000, 0.0025],
                [6950000, 0.0050],
                [7350000, 0.0075],
                [7800000, 0.0100],
                [8350000, 0.0125],
                [9050000, 0.0150],
                [9800000, 0.0175],
                [10500000, 0.0200],
                [11200000, 0.0220],
                [12050000, 0.0300],
                [12950000, 0.0400],
                [14150000, 0.0500],
                [15500000, 0.0600],
                [17050000, 0.0700],
                [19500000, 0.0800],
                [22700000, 0.0900],
                [26600000, 0.1000],
                [28600000, 0.1100],
                [30100000, 0.1200],
                [31750000, 0.1300],
                [33600000, 0.1400],
                [36300000, 0.1500],
                [40300000, 0.1600],
                [45400000, 0.1700],
                [51200000, 0.1800],
                [58000000, 0.1900],
                [66000000, 0.2000],
                [75200000, 0.2100],
                [83200000, 0.2200],
                [93600000, 0.2300],
                [105600000, 0.2400],
                [116000000, 0.2500],
                [134000000, 0.2600],
                [163000000, 0.2700],
                [221000000, 0.2800],
                [309000000, 0.2900],
                [463000000, 0.3000],
                [561000000, 0.3100],
                [705000000, 0.3200],
                [865000000, 0.3300],
                [1419000000, 0.3400],
            ]
        ];

        foreach ($data as $kode => $brackets) {
            $kategoriPph = Kategoripph::where('nama', "Kategori {$kode}")->first();

            if (!$kategoriPph) {
                $this->command->warn("Kategori PPH 'Kategori {$kode}' tidak ditemukan, dilewati.");
                continue;
            }

            foreach ($brackets as [$limit, $rate]) {
                TaxBracket::create([
                    'kategoripph_id' => $kategoriPph->id,
                    'upper_limit' => $limit,
                    'persentase' => $rate,
                ]);
            }

            $this->command->info("âœ” Data bracket untuk Kategori {$kode} berhasil diinput.");
        }
    }
}
